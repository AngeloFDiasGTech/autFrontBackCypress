<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Aprovação de Crédito</title>
    <style>
      /* Estilos básicos para demonstrar formatação; ajustável conforme desejado */
      body {
        font-family: sans-serif;
        background: #f9fafb;
        margin: 0;
        padding: 0;
      }

      .container {
        max-width: 600px;
        margin: 2rem auto;
        background: #fff;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        margin-bottom: 1rem;
      }

      .form-group {
        margin-bottom: 1rem;
        display: flex;
        flex-direction: column;
      }

      label {
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      input[type="text"],
      input[type="number"] {
        padding: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 1rem;
      }

      input[type="submit"] {
        cursor: pointer;
        background: #3b82f6;
        color: #fff;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        border: none;
        border-radius: 6px;
        transition: background 0.3s ease;
      }

      input[type="submit"]:hover {
        background: #2563eb;
      }

      .result {
        margin-top: 2rem;
        padding: 1rem;
        border-radius: 6px;
      }

      .success {
        background: #dcfce7;
        color: #166534;
      }

      .error {
        background: #fee2e2;
        color: #991b1b;
      }

      .notes {
        margin-top: 2rem;
        font-size: 0.9rem;
        color: #6b7280;
        border-top: 1px solid #e5e7eb;
        padding-top: 1rem;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Sistema de Aprovação de Crédito</h1>
      <form id="creditForm">
        <!-- Nome -->
        <div class="form-group">
          <label for="nome">Nome Completo</label>
          <input
            type="text"
            id="nome"
            name="nome"
            placeholder="Ex: Maria Silva"
            required
          />
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">E-mail</label>
          <input
            type="text"
            id="email"
            name="email"
            placeholder="Ex: maria@email.com"
            required
          />
        </div>

        <!-- Renda Mensal -->
        <div class="form-group">
          <label for="renda">Renda Mensal (R$)</label>
          <input
            type="number"
            id="renda"
            name="renda"
            min="0"
            placeholder="Ex: 3000"
            required
          />
        </div>

        <!-- CPF -->
        <div class="form-group">
          <label for="cpf">CPF</label>
          <input
            type="text"
            id="cpf"
            name="cpf"
            placeholder="Ex: 123.456.789-00"
            required
          />
        </div>

        <!-- Valor de Crédito -->
        <div class="form-group">
          <label for="credito">Valor de Crédito Desejado (R$)</label>
          <input
            type="number"
            id="credito"
            name="credito"
            min="1000"
            max="50000"
            placeholder="Entre 1000 e 50000"
            required
          />
        </div>

        <input type="submit" value="Solicitar Crédito" />
      </form>

      <div id="result" class="result" style="display: none;"></div>

      <div class="notes">
        <p><strong>Notas para Testes Funcionais:</strong></p>
        <ul>
          <li>Campos "Nome", "E-mail", "Renda", "CPF" e "Valor de Crédito" são obrigatórios.</li>
          <li>Valor de crédito deve estar entre R$ 1000 e R$ 50000.</li>
          <li>Valor de renda mínima, padrão para aprovação, pode ser definido pelos grupos de teste (exemplo: R$ 2000).</li>
          <li>Única validação do CPF é a máscara "123.456.789-00".</li>
        </ul>
      </div>
    </div>

    <script>
      // Opcional: validação simples e simulação de resposta (Apenas FRONTEND)
      const form = document.getElementById('creditForm');
      const resultDiv = document.getElementById('result');

      form.addEventListener('submit', function (event) {
        event.preventDefault();

        // Obter dados
        const nome = document.getElementById('nome').value.trim();
        const email = document.getElementById('email').value.trim();
        const renda = parseFloat(document.getElementById('renda').value);
        const cpf = document.getElementById('cpf').value.trim();
        const credito = parseFloat(document.getElementById('credito').value);

        // Salvar dados no localStorage
        const dados = { nome, email, renda, cpf, credito, data: new Date().toISOString() };
        // Recupera envios anteriores (array), ou cria novo
        const envios = JSON.parse(localStorage.getItem('creditos') || '[]');
        envios.push(dados);
        localStorage.setItem('creditos', JSON.stringify(envios));

        // Salvar dados também no sessionStorage
        const enviosSessao = JSON.parse(sessionStorage.getItem('creditos') || '[]');
        enviosSessao.push(dados);
        sessionStorage.setItem('creditos', JSON.stringify(enviosSessao));

        // Salvar dados também nos cookies (sem apagar o atual)
        function setCookie(name, value, days) {
          let expires = "";
          if (days) {
            const date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            expires = "; expires=" + date.toUTCString();
          }
          document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";
        }

        function getCookie(name) {
          const nameEQ = name + "=";
          const ca = document.cookie.split(';');
          for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));
          }
          return null;
        }

        // Recupera envios anteriores dos cookies
        const enviosCookie = JSON.parse(getCookie('creditos') || '[]');
        enviosCookie.push(dados);
        setCookie('creditos', JSON.stringify(enviosCookie), 7); // expira em 7 dias

        // Simulação de regra: Renda mínima para aprovação = R$ 2000
        const rendaMinima = 2000;

        // Validação superficial
        let messages = [];

        // Exemplos de validação
        // E-mail
        if (!email.includes('@') || !email.includes('.')) {
          messages.push('E-mail inválido.');
        }
        // CPF (bem simplificado, sem real verificação do dígito)
        const cpfRegex = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/;
        if (!cpfRegex.test(cpf)) {
          messages.push('CPF em formato inválido. Use XXX.XXX.XXX-XX');
        }
        // Renda
        if (renda < 0) {
          messages.push('Renda não pode ser negativa.');
        }
        // Valor de crédito (HTML já faz min e max, mas podemos checar)
        if (credito < 1000 || credito > 50000) {
          messages.push('Valor de Crédito deve estar entre R$ 1000 e R$ 50000.');
        }

        if (messages.length > 0) {
          resultDiv.innerHTML = messages.join('<br>');
          resultDiv.className = 'result error';
          resultDiv.style.display = 'block';
        } else {
          // Simula aprovação ou reprovação
          if (renda >= rendaMinima) {
            resultDiv.innerHTML =
              `Olá, <strong>${nome}</strong>. Sua solicitação de crédito no valor de R$ ${credito} foi <strong>APROVADA</strong>!`;              
            resultDiv.className = 'result success';
          } else {
            resultDiv.innerHTML =
              `Olá, <strong>${nome}</strong>. Sua solicitação de crédito no valor de R$ ${credito} foi <strong>REPROVADA</strong>, pois sua renda é menor que R$ ${rendaMinima}.`;
            resultDiv.className = 'result error';
          }
          resultDiv.style.display = 'block';
        }
      });
    </script>
  </body>
</html>
